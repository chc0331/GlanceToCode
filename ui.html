<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Design to Glance</title>
</head>
<body>
  <div class="container">
    <h2>Design to Glance</h2>
    <div class="buttons">
      <button id="copy">Copy Code</button>
      <button id="close">Close</button>
    </div>
    <textarea id="code" placeholder="Select Rectangle nodes to generate Box code..."></textarea>
  </div>

  <script>
    const codeTextarea = document.getElementById('code');
        
    document.getElementById('copy').onclick = () => {
      const code = codeTextarea.value;
      navigator.clipboard.writeText(code).then(() => {
        // Optional: show feedback
      });
    };
    
    document.getElementById('close').onclick = () => {
      parent.postMessage({ pluginMessage: { type: 'close' } }, '*');
    };
    
    // Handle messages from plugin
    window.onmessage = (event) => {
      const msg = event.data.pluginMessage;
      if (msg && msg.type === 'code') {
        codeTextarea.value = msg.code;
      }
      if (msg && msg.type === 'parsedTree') {
        // auto-download parsed tree JSON (temporarily disabled)
        /*
        const json = msg.json || '';
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'parsed_tree.json';
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
        */
      }
    };
  </script>
</body>
</html>